import { useState } from "react";
import Head from "next/head";

import Columns from "../components/layout/Columns";
import Title from "../components/items/Title";
import MenuButton from "../components/items/MenuButton";
import Card from "../components/sets/Card";
import { nossoSonho } from "../data/nosso-sonho";
import Modal from "../components/sets/Modal";

import Media from "react-media";

export default function NossoSonho() {
  //Card
  //Define qual modal deve aparecer
  //Ativa ou desativa o modal
  const [cardNumber, setCardNumber] = useState(0);
  const [modalOpen, setModalOpen] = useState(false);

  const [projeto, setModal] = useState(0);

  return (
    <>
      <Head>
        <title>Creche Chico Xavier</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Columns>
        <div className="left">
          <Title
            title="Junte-se ao"
            span="Nosso Sonho"
            subtitle="Faça parte do nosso sonho e ajude crianças e famílias a serem mais felizes."
          >
            <nav>
              {nossoSonho.map((menuItem) => (
                <MenuButton
                  key={menuItem.key}
                  link={menuItem.link}
                  title={menuItem.title}
                  span={menuItem.span}
                  image={true}
                  vert={true}
                  onClick={() => (
                    <>
                      {setCardNumber(menuItem.key)}
                      {setModalOpen(true)}
                    </>
                  )}
                />
              ))}
            </nav>
          </Title>
        </div>
        <Media query="(min-width: 875px)">
          {(matches) => {
            return matches ? (
              <div className="right">
                <Card
                  title={
                    nossoSonho[cardNumber].title +
                    " " +
                    nossoSonho[cardNumber].span
                  }
                  icon={nossoSonho[cardNumber].link}
                >
                  {nossoSonho[cardNumber].documentos}
                </Card>
              </div>
            ) : (
              <>
                {" "}
                {modalOpen && (
                  <Modal
                    title={
                      nossoSonho[cardNumber].title +
                      " " +
                      nossoSonho[cardNumber].span
                    }
                    className="modal-title"
                    onClick={() => <>{setModalOpen(false)}</>}
                  >
                    {nossoSonho[cardNumber].documentos}
                  </Modal>
                )}
              </>
            );
          }}
        </Media>
      </Columns>

      <style jsx>{``}</style>

      <style jsx global>{`
        .left .subTitle,
        .right .subtitle {
          max-width: 70rem;
        }

        .right {
          width: -webkit-fill-available;
        }

        .card {
          width: -webkit-fill-available;
        }

        .cardContent .cardInfo .cardImage {
          position: relative;
          width: 49rem;
          height: 28rem;
          margin: 0 auto 3rem;
          outline: 1rem solid #fff;
          border-radius: 2rem;
          box-shadow: 0.5rem 1.3rem 3rem -0.6rem hsl(356deg 70% 30% / 63%);
          transform: rotate(2deg);
        }

        .cardContent .cardInfo {
          margin-top: 1rem;
          font-size: 2rem;
          line-height: 3.3rem;
          text-align: center;
        }

        .cardContent .cardInfo h2 {
          font-size: 2.4rem;
          font-weight: bold;
          line-height: 2;
          color: hsl(195deg 80% 40%);
        }

        @media (max-width: 875px) {
          .cardInfo {
            margin: 3rem 0;
            font-size: 2rem;
            line-height: 2;
            text-align: center;
          }

          .modalCard .modalContent {
            text-align: center;
          }

          .modalCard .modalContent .cardImage {
            position: relative;
            width: 49rem;
            height: 28rem;
            margin: 0 auto 3rem;
            outline: 1rem solid #fff;
            border-radius: 2rem;
            box-shadow: 0.5rem 1.3rem 3rem -0.6rem hsl(356deg 70% 30% / 63%);
            transform: rotate(2deg);
          }
        }
      `}</style>
    </>
  );
}
