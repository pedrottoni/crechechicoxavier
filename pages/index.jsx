import Head from "next/head";
import Home from "../components/layout/Home";
import Title from "../components/items/Title";
import Links from "../components/sets/Links";
import menu from "../data/menu";
import Logo from "../public/images/Logo";

import { useState, useCallback, useEffect } from "react";

const useMediaQuery = (width) => {
  const [targetReached, setTargetReached] = useState(false);

  const updateTarget = useCallback((e) => {
    if (e.matches) {
      setTargetReached(true);
    } else {
      setTargetReached(false);
    }
  }, []);

  useEffect(() => {
    const media = window.matchMedia(`(max-width: ${width}px)`);
    media.addListener(updateTarget);

    // Check on mount (callback is not called until a change occurs)
    if (media.matches) {
      setTargetReached(true);
    }

    return () => media.removeListener(updateTarget);
  }, []);

  return targetReached;
};

export default function Index() {
  const isBreakpoint = useMediaQuery(768);
  return (
    <>
      <Head>
        <h1>TESTE</h1>
        <title>Creche Chico Xavier</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Home>
        <header>
          <Logo />
          <Title title="Multiplicamos o amor" span="Através da educação" />
        </header>
        <Links menu={menu} image={true} />
      </Home>
      {isBreakpoint ? <Logo /> : null}
      <style jsx global>{``}</style>
    </>
  );
}
